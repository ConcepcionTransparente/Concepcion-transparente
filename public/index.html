<!DOCTYPE html>
<html ng-app="dcuApp">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0"/>
    <title>Datos abiertos</title>
    <!-- CSS  -->
    <link href="http://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,400italic,700,300,300italic' rel='stylesheet' type='text/css'>
    <!--Import materialize.css-->
    <link type="text/css" rel="stylesheet" href="../bower_components/materialize/dist/css/materialize.css"  media="screen,projection"/>
    <link type="text/css" rel="stylesheet" href="../css/index.css" />
    <link rel="stylesheet" href="../css/bubble_chart.css">

    <!-- Load c3.css -->
    <link href="/lib/c3/htdocs/css/c3.css" rel="stylesheet" type="text/css">
    <!-- Load d3.js and c3.js -->
    <!-- <script src="//d3js.org/d3.v3.min.js"></script> -->
    <script src="../lib/d3.js"></script>
    <script src="/lib/c3/htdocs/js/c3.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.8/angular.min.js"></script>

  </head>


  <body>
    <div class="container">
      <header class="row">
        <div class="col s12 m8 border-right">
          <h1>CONCEPCIÓN TRANSPARENTE</h1>
          <h3>Portal de visualización y apertura de datos de la Municipalidad de Concepción del Uruguay</h3>
        </div>
        <div class="col s12 m4 date">
          <script>
          var meses = new Array ("Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre");
          var diasSemana = new Array("Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado");
          var f=new Date();
          document.write(diasSemana[f.getDay()] + ", " + f.getDate() + " de " + meses[f.getMonth()] + " de " + f.getFullYear());
          </script>
        </div>
      </header>

<!-- ////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////////////////////////////
    //////////////////////////////////////////////////////////////////////////////// -->
      <div class="divider"></div>
      <div class="row general-data" ng-cloak ng-controller="generalController">
        <h3>En
          <!-- {{data[0].year}} -->
          la municipalidad de Concepción del Uruguay brinda:</h3>
        <div class="col s12 m3 border-right">
          <p>TOTAL DE ORDENES DE COMPRA POR:<br><br><br><span>
           <!-- {{totalorders.data[0]|currency}} -->
           {{totalorders.data[0].import |currency}}
          </span></p>
        </div>
        <div class="col s12 m3 border-right">
          <p>PROMEDIO DE GASTO MENSUAL:<br><br><br><span>need filters</span></p>
        </div>
        <div class="col s12 m3 border-right">
          <p>CANTIDAD DE PROVEEDORES:<br><br><br><br><span>
             {{totalproviders.data}}
          </span></p>
        </div>
        <div class="col s12 m3">
          <p>CANTIDAD DE ORDENES DE COMPRAS:<br><br><br><span>
            {{orders.data}}
          </span></p>
        </div>
    </div>

    <!-- ////////////////////////////////////////////////////////////////////////////////
        ////////////////////////////////////////////////////////////////////////////////
        //////////////////////////////////////////////////////////////////////////////// -->
    <div class="row">
      <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupida.</p>
      <br>
      <div class="col s12" style="background:rgba(230,230,230,0.4)">
        <h4>Filtros</h4>
        <br>
      </div>

    </div>
    <br>
    <div class="divider"></div>

    <!-- ////////////////////////////////////////////////////////////////////////////////
        ////////////////////////////////////////////////////////////////////////////////
        //////////////////////////////////////////////////////////////////////////////// -->
      <h3>Total de proveedores 2016:</h3>
  <!-- <div class="container"> -->
      <!-- <div id="toolbar">
        <a href="#" id="all" class="button active">All Grants</a>
        <a href="#" id="year" class="button">Grants By Year</a>
      </div> -->

      <!-- BUBBLE CHART -->
      <div id="bubbleChartFather" class="row" >
          <div class="col m3 s12">
          </div>
          <div class="col m9 s12">
            <div id="bubbleChart" class="svg-container" ></div>
            <div id="vis"></div>
          </div>
      </div>

      <!-- ////////////////////////////////////////////////////////////////////////////////
          ////////////////////////////////////////////////////////////////////////////////
          //////////////////////////////////////////////////////////////////////////////// -->
      <br>
      <div class="divider"></div>
      <div class="row">
        <div class="article">
          <h3>Evolución del gasto durante el año 2016: </h3>
          <div id="lineschart" ng-controller="linechartController"></div>
        </div>
        <br>
      </div>

  <!-- ////////////////////////////////////////////////////////////////////////////////
      ////////////////////////////////////////////////////////////////////////////////
      //////////////////////////////////////////////////////////////////////////////// -->
      <div class="divider"></div>
      <div class="row" ng-controller="rankingController">
        <h3>Ranking de proveedores</h3>
        <table>
          <thead>
            <tr>
              <th>PROVEEDOR</th>
              <th>CUIL</th>
              <th>IMPORTE TOTAL</th>
              <th>DETALLE</th>
            </tr>
            </thead>
            <tbody>
              <tr ng-repeat="x in data">
                <td>{{ x._id.grant_title }}</td>
                <td>{{ x._id.cuil }}</td>
                <td>{{ x.import | currency}}</td>
                <td><a href="/{{x._id._id}}">Ver detalle</a></td>
              </tr>
            </tbody>
        </table>
      </div>
  <!-- ////////////////////////////////////////////////////////////////////////////////
      ////////////////////////////////////////////////////////////////////////////////
      //////////////////////////////////////////////////////////////////////////////// -->
      <div class="divider"></div>
      <br><br>
      <div class="row" ng-controller="purchaseController">
        <h3>Contratos de obra pública y servicios</h3>
        <form>
          <input type="text" placeholder="Filtrar Categoria / Proveedor / Importe / Año" ng-model="searchPurchase">
        </form>
        <table>
          <thead>
            <tr>
              <th>
                <a href="" ng-click="sortType = 'fk_Category.category'; sortReverse = !sortReverse">
                  REPARTICIÓN
                  <span ng-show="sortType == 'fk_Category.category' && !sortReverse"></span>
                  <span ng-show="sortType == 'fk_Category.category' && sortReverse"></span>
                </a>
              </th>
              <th>
                <a href="" ng-click="sortType = 'fk_Provider'; sortReverse = !sortReverse">
                  PROVEEDOR
                  <span ng-show="sortType == 'fk_Provider' && !sortReverse"></span>
                  <span ng-show="sortType == 'fk_Provider' && sortReverse"></span>
                </a>
              </th>
              <th>
                <a href="" ng-click="sortType = 'import'; sortReverse = !sortReverse">
                  IMPORTE
                  <span ng-show="sortType == 'import' && !sortReverse"></span>
                  <span ng-show="sortType == 'import' && sortReverse"></span>
                </a>
              </th>
              <th>
                DETALLE
              </th>
            </tr>
          </thead>
          <tbody>
            <tr ng-repeat="x in data | orderBy:sortType:sortReverse | filter:searchPurchase | limitTo: paginationLimit()">
              <td>{{ x.fk_Category.category }}</td>
              <td>{{ x.fk_Provider.grant_title }}</td>
              <td>{{x.import | currency}}</td>
              <td><a href="/{{x.fk_Provider}}">Ver detalle</a></td>
              <td style="display:none;">{{ x.year}}</td>
            </tr>
          </tbody>
        </table>
        <button class="show-more-btn" ng-show="hasMoreItemsToShow()" ng-click="showMoreItems()">Show more</button>

      </div>
      <!-- ////////////////////////////////////////////////////////////////////////////////
          ////////////////////////////////////////////////////////////////////////////////
          //////////////////////////////////////////////////////////////////////////////// -->

          <!--   Icon Section   -->
            <div class="row">
              <div class="col s12 m12">
                <h3>Presupuesto del año 2015:</h3>
              </div>
              <div class="col s12 m6" style="text-align:center">
                <div class="icon-block">
                  <p class="light">
                    <svg width="150" height="150">
                      <circle cx="50%" cy="50%" r="70" fill="#4db6ac" />
                      <text x="25%" y="60%" font-family="sans-serif" font-size="40px" font-weight="bold" fill="white">57%</text>
                    </svg>
                    <p class="fixedprice">
                      <span>$220</span>.000.000 <br>Millones <br>Destinado a sueldos
                    </p>
                  </p>
                </div>
              </div>

              <div class="col s12 m6" style="text-align:center">
                <div class="icon-block">
                  <p class="light">
                    <svg width="150" height="150">
                      <circle cx="50%" cy="50%" r="70" fill="#4db6ac" />
                      <text x="25%" y="60%" font-family="sans-serif" font-size="40px" font-weight="bold" fill="white">43%</text>
                    </svg>
                    <p class="fixedprice">
                      <span>$164</span>.000.000 <br>Millones <br>Otros gastos
                    </p>
                  </p>
                </div>
              </div>
            </div> <!-- end row -->


            <!-- ////////////////////////////////////////////////////////////////////////////////
                ////////////////////////////////////////////////////////////////////////////////
                //////////////////////////////////////////////////////////////////////////////// -->

            <footer>
              <div class="divider"></div>
              <p>
              Gasto Público de Concepción del Uruguay - <span>Copyright (c) 2016 Copyright All Rights Reserved.</span>
              </p>
            </footer>
            <!-- ////////////////////////////////////////////////////////////////////////////////
                ////////////////////////////////////////////////////////////////////////////////
                //////////////////////////////////////////////////////////////////////////////// -->

    <!-- ANGULAR AND FRONTEND -->
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.8/angular.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.8/angular-route.js"></script>

    <!--Import jQuery before materialize.js-->
    <script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
    <script src="../bower_components/materialize/dist//js/materialize.min.js"></script>
    <script src="../bower_components/materialize/dist/js/init.js"></script>

    <script src="app.js"></script>
    <!-- D3 AND PAINT SCRIPTS -->
    <script src="../lib/d3.js"></script>
    <script src="../src/tooltip.js"></script>
    <script src="../src/bubble_chart.js"></script>
    <!-- <script src="../src/line_chart.js"></script> -->

  </body>
</html>
