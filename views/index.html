<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Dashboard</title>
    <!-- <link href="http://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"> -->
      <!--Import materialize.css-->
    <!-- <link type="text/css" rel="stylesheet" href="../stylesheets/materialize.min.css"  media="screen,projection"/> -->
    <link type="text/css" rel="stylesheet" href="../stylesheets/style.css" />
    <script src="//d3js.org/d3.v3.min.js"></script>
  </head>


  <body>
    <h1>Datos Concepcion</h1>

    <script type="text/javascript">
    /*var dataset = [
                  [ 5,     20 ],
                  [ 480,   90 ],
                  [ 250,   50 ],
                  [ 100,   33 ],
                  [ 330,   95 ],
                  [ 410,   12 ],
                  [ 475,   44 ],
                  [ 25,    67 ],
                  [ 85,    21 ],
                  [ 220,   88 ]
              ];

        var w = 500;
        var h = 100;
        var svg = d3.select("body")
                .append("svg")
                .attr("width", w)   // <-- Acá
                .attr("height", h); // <-- y aca!

        svg.selectAll("circle")
        .data(dataset)
        .enter()
        .append("circle")
        .attr("fill","blue")
        .attr("cx", function(d) {
            return d[0];
        })
        .attr("cy", function(d) {
            return d[1];
        })
        .attr("r", 5)
        .attr("r", function(d) {
        return Math.sqrt(h - d[1]);
        });

        */
        </script>
        <script>

          d3.json("results.json",function(data){
            function randomcolor(){
	             return "#" + Math.random().toString(16).slice(2, 8) + "";
             }
            var w = 900;
            var h = 700;
            var svg = d3.select("body")
                    .append("svg")
                    .attr("width", w)   // <-- Acá
                    .attr("height", h); // <-- y aca!
                    svg.selectAll("circle")
                    .data(data)
                    .enter()
                      .append("circle")
                      .attr("fill",function(){return randomcolor()})
                      .attr("cx", function(d){
                        // return d.presupuesto;
                        var cx=Math.floor((Math.random() * 100) + 100);
                        return cx;
                      })
                      .attr("cy", function(d){
                        var cy=Math.floor((Math.random() * 100) + 200);
                        return cy;
                      })
                      .attr("r", function(d){
                        var index = d.Importe.indexOf(',');
                        var indexpoint = d.Importe.indexOf('.');
                        var string1 = d.Importe.substring(0,indexpoint);
                        var string2 = d.Importe.substring(indexpoint+1,index);
                        var string = string1.concat(string2);
                        var radius = parseInt(string) /10000;
                        console.debug("Index:" +index);
                        console.debug("String:" +string);
                        console.debug("Radius:" +radius);
                        return radius;
                      });

                    svg.selectAll("text")
                    .data(data)
                    .enter()
                      append("text")
                      .attr("fill","black")
                      .attr("font-weght",100)
                      .attr("y",100)
                      .text(function(d){return d.name})
          })//end d3.json

        </script>


  </body>
</html>
